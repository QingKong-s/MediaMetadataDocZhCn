# ID3v2章节

非正式标准

文件：id3v2-chapters-1.0.html

C. 纽厄尔

2005年12月2日

## 备注

**本节为译者添加。**

**请注意，此文件基于ID3v2文档翻译并添加内容而来，而非文件的原始版本，若要获取原始版本，请访问<http://www.id3.org>。**

**具体来源为：<https://id3.org/id3v2-chapters-1.0>**

**若有其他非ID3官网来源，将在其出现的小节列出。**

**译者非音乐或数字多媒体行业专业人士，组织此文档仅用于软件开发，部分机翻错误已纠正，若有专业术语翻译错误或不合理的情况，请提交拉取请求或issue。**

**译者不对本文作任何保证，包括但不限于行文描述准确性的保证，读者应自行评判准确性并对可能因参考本文造成的错误承担一切责任。**

# 1.ID3v2章节帧增编

## 1.1.本文件的地位

本文件是ID3v2.3和ID3v2.4标准的增编。本文件的分发不受限制。

## 1.2.摘要

本文件介绍了一种使用两个新的ID3v2帧在音频文件中标示章节和目录的方法。这些目录帧允许听众导航到音频文件中的特定位置，并可提供与各章节相关的描述信息、URL和图像。

## 1.3.目录

+ [1.ID3v2章节帧增编](#1id3v2章节帧增编)
  + [1.1.本文件的地位](#11本文件的地位)
  + [1.2.摘要](#12摘要)
  + [1.3.目录](#13目录)
+ [2.本文件中的约定](#2本文件中的约定)
+ [3.声明的ID3v2帧](#3声明的id3v2帧)
  + [3.1.章节帧(CHAP)](#31章节帧chap)
  + [3.2.目录帧(CTOC)](#32目录帧ctoc)
+ [4.注意事项](#4注意事项)
+ [5.版权](#5版权)
+ [6.参考文献](#6参考文献)
+ [7.作者地址](#7作者地址)

# 2.本文件中的约定

`""`内的文本为文本字符串，与标签中的文本字符串完全一致。以`$`开头的数字为十六进制，以`%`开头的数字为二进制。`$xx`表示内容未知的字节。`%x`用于表示内容未知的位。字节的最高有效位(MSB)称为"第7位"，最低有效位(LSB)称为"第0位"。

标签是ID3v2主结构文档[v2.4]中描述的整个标签。帧是标签中的一个信息块。标签由标头、帧和可选填充组成。字段是一段信息；一个数值、一个字符串等。数字字符串是仅由字符"0123456789"组成的字符串。

本文档中的关键词"MUST"、"MUST NOT"、"REQUIRED"、"SHALL"、"SHALL NOT"、"SHOULD"、"SHOULD NOT"、"RECOMMENDED"、"MAY"和"OPTIONAL"应按照 RFC 2119[KEYWORDS]中的描述进行解释。

# 3.声明的ID3v2帧

本文档声明了以下帧。

+ [3.1.CHAP章节](#31章节帧)
+ [3.2.CTOC目录](#32目录帧)

## 3.1.章节帧(CHAP)

该帧用于描述音频文件中的一个章节。一个标记中可以有多个这种类型的帧，但每个帧都必须有一个相对于标记中任何其他"CHAP"帧或"CTOC"帧都是唯一的元素 ID。

|名称|内容|
|-|-|
|元素ID|<文本字符串> `$00`|
|开始时间|`$xx xx xx xx`|
|结束时间|`$xx xx xx xx`|
|开始偏移|`$xx xx xx xx`|
|结束偏移|`$xx xx xx xx`|
|<可选的嵌入式子帧>||

**元素ID**可唯一标识帧。它不具有可读性，不应显示给用户。

**开始和结束时间**分别是从文件开始到章节开始和结束的毫秒数。

**开始偏移**是指从文件开始到章节中第一个音频帧的第一个字节之间从0开始的字节计数。如果这些字节都设置为`0xFF`，则应忽略该值并使用开始时间值。

**结束偏移**是指从文件开头到章节结束后音频帧的第一个字节之间从0开始的字节计数。如果这些字节都设置为`0xFF`，那么该值将被忽略，而应使用结束时间值。

接下来是一系列可选帧，它们嵌入在"CHAP"帧中，用于描述章节内容(如代表章节名称的"TIT2"帧)或提供相关材料(如URL和图像)。这些子帧包含在"CHAP"帧的范围内，由"CHAP"帧标头的大小字段表示。如果解析器无法识别"CHAP"帧，它可以使用帧标头的大小字段跳过这些帧。这样做时，它将跳过帧中包含的任何内嵌子帧。

图1显示了一个包含两个内嵌子帧的"CHAP"帧示例。第一个是提供章节名称的"TIT2"子帧，即"第1章——织布"。第二个是"TIT3"子帧，提供本章的描述"狩猎的预期"。

CHAPFrame-1.0.png 图 1：CHAP 帧示例

## 3.2.目录帧(CTOC)

"CTOC"帧的目的是允许定义目录。在最简单的情况下，单个"CTOC"帧可用于提供平面(单层)目录。不过，也可以使用多个"CTOC"帧来定义分层(多级)目录。

一个标签中可以有多个此类帧，但每个帧都必须有一个相对于标签中任何其他"CTOC"或"CHAP"帧都是唯一的元素 ID。

每个"CTOC"帧通过提供子元素ID列表来代表目录的一个层级或元素。这些标识与标签中其他"CHAP"和"CTOC"帧的元素标识相匹配。

|名称|内容|
|-|-|
|元素ID|<文本字符串> `$00`|
|标志|`%000000ab`|
|条目计数|`$xx` (8位无符号整数)|
|<子元素ID列表>|<文本字符串> `$00`|
|<可选嵌入的子帧>||

**元素ID**可唯一标识帧。它不具有可读性，不应显示给用户。

**标志**的定义如下：

+ `a` 顶级位<br>设置为`1`表示顶层"CTOC"帧。该帧是目录树的根，不是任何其他"CTOC"帧的子帧。在一个ID3v2标签中，只有一个"CTOC"帧可以将该位设置为`1`，其他所有"CTOC"帧都应将该位设置为0。

+ `b` 有序位<br>如果子元素ID列表中的条目是有序的，则该位应设为`1`；如果不是有序的，则该位应设为`0`。这将提示是以连续有序序列还是单独播放元素。

**条目计数**是子元素ID列表中的条目数，必须大于0。列表中的每个条目包括

子元素ID列表的最后一个条目后面是一连串**可选帧**，这些子帧嵌入在"CTOC"帧中，用于描述目录中的这一元素(例如代表元素名称的"TIT2"帧)或提供相关材料，如URL和图片。这些子帧都包含在"CTOC"帧的范围内，正如"CTOC"帧标头中的大小字段所表示的那样。

如果解析器无法识别"CTOC"帧，它可以使用帧标头中的大小字段跳过这些帧。这样做时，它将跳过帧中包含的任何内嵌子帧。

图2显示了一个引用章节序列的"CTOC"帧示例。它包含一个"TIT2"子帧，为目录中的这个元素提供了一个名称："第1部分"。

CTOCFrame-1.0.png 图 2：CTOC 帧示例

# 4.注意事项

"CHAP"帧可以描述章节重叠或章节之间有间隙的情况。

允许包含未被任何"CTOC"帧引用的"CHAP"帧。例如，这些帧可用于提供与音频同步显示的图像，而不是支持目录。

建议"CHAP"和"CTOC"帧应包括一个"TIT2"子帧，以提供一个人可读的标识符，呈现给最终用户以帮助导航和选择。

# 5.版权

**英国广播公司研发部和丹-奥尼尔版权所有，2005年。**

**本文件及其译文可复制并提供给他人，对本文件进行评论或解释或协助其实施的衍生作品可全部或部分编制、复制、出版和发行，不受任何形式的限制，前提是所有此类副本和衍生作品中必须提及本文件。但是，不得以任何方式修改本文件本身并将其作为原始文件重新发行。**

**上述授予的有限权限永久有效，不得撤销。**

**本文档及其中包含的信息均按"原样"提供，作者不作任何明示或暗示的保证，包括但不限于使用本文档中的信息不会侵犯任何权利的保证，或任何暗示的适销性或特定用途适用性的保证。**

# 6.参考文献

[v2.3] Martin Nilsson, ID3 tag version 2.3.0.

[v2.4] Martin Nilsson, ID3 tag version 2.4.0 - Main Structure.

[KEYWORDS] S. Bradner, 'Key words for use in RFCs to Indicate Requirement Levels', RFC 2119, March 1997.

# 7.作者地址

克里斯·纽厄尔(Chris Newell)

英国广播公司研发部 金斯伍德沃伦(Kingswood Warren) 塔德沃斯(Tadworth) 萨里郡(Surrey) KT20 6NP 英国

电子邮件：<chris.newell@rd.bbc.co.uk>
