# ID3标签2.4.0版 - 主要结构

## 本文件的地位

本文件为非正式标准，取代ID3v2.3.0标准[ID3v2]。正式标准将使用另一个修订号，即使内容与本文件相同。本文件中的内容可能会因澄清而改变，但绝不会因增加或改变功能而改变。本文件的分发不受限制。

## 内容摘要

ID3v2.4.0是ID3v2非正式标准[ID3v2.3.0]2.3.0版本的修订版。ID3v2为音频文件本身提供了一种灵活的音频元信息存储方式。这些信息可以是均衡曲线等技术信息，也可以是标题、表演者、版权等信息。

ID3v2.4.0的目的是尽可能接近ID3v2.3.0，以便尽可能方便地修改实施方案。

## 备注

**本节为译者添加。**

**请注意，此文件基于ID3v2文档翻译并添加内容而来，而非文件的原始版本，若要获取原始版本，请访问<http://www.id3.org>。**

**具体来源如下(可能不完全)：**

+ <https://id3.org/d3v2.3.0>
+ <https://id3.org/id3v2.4.0-structure>
+ <https://id3.org/id3v2-00>

**若有其他非ID3官网来源，将在其出现的小节列出。**

**译者非音乐或数字多媒体行业专业人士，组织此文档仅用于软件开发，部分机翻错误已纠正，若有专业术语翻译错误或不合理的情况，请提交拉取请求或issue。**

**译者不对本文作任何保证，包括但不限于行文描述准确性的保证，读者应自行评判准确性并对可能因参考本文造成的错误承担一切责任。**

# 1.目录

+ [1.目录](#1目录)
+ [2.本文件中的惯例](#2本文件中的惯例)
+ [3.ID3v2概述](#3id3v2概述)
  + [3.1.ID3v2标签头](#31id3v2标签头)
  + [3.2.ID3v2扩展头](#32id3v2扩展头)
  + [3.3.填充](#33填充)
  + [3.4.ID3v2标签尾](#34id3v2标签尾)
+ [4.ID3v2帧概述](#4id3v2帧概述)
  + [4.1.帧头标志](#41帧头标志)
  + [4.1.1.帧状态标志](#411帧状态标记)
  + [4.1.2.帧格式标志](#412帧格式标记)
+ [5.标签位置](#5标签位置)
+ [6.非同步](#6非同步)
  + [6.1.非同步方案](#61非同步方案)
  + [6.2.同步安全整数](#62同步安全整数)
+ [7.版权](#7版权)
+ [8.参考文献](#8参考文献)
+ [9.附录](#9附录)
  + [A.附录A - 与ID3v2.3的不同](#a附录a---与id3v23的不同)
    + [A.1.ID3v2.4中的结构](#a1id3v24中的新增结构)
    + [A.2.ID3v2.3和ID3v2.4中都存在但不同的结构](#a2id3v23和id3v24中都存在但不同的结构)
    + [A.3.ID3v2.4弃用的ID3v2.3中的结构](#a3id3v24弃用的id3v23中的结构)
  + [B.附录B - ID3v2.3与ID3v2.2的不同](#b附录b---id3v23与id3v22的不同)
    + [B.1.ID3v2.3中的新增结构](#b1id3v23中的新增结构)
    + [B.2.ID3v2.2和ID3v2.3中都存在但不同的结构](#b2id3v22和id3v23中都存在但不同的结构)
      + [B.2.1.ID3v2.2标签头](#b21id3v22标签头)
      + [B.2.2.ID3v2.2帧](#b22id3v22帧)
    + [B.3.ID3v2.3弃用的ID3v2.2中的结构](#b3id3v23弃用的id3v22中的结构)
+ [10.作者地址](#10作者地址)

# 2.本文件中的惯例

`""`内的文本为文本字符串，与标签中的文本字符串完全一致。以`$`开头的数字为十六进制，以`%`开头的数字为二进制。`$xx`表示内容未知的字节。`%x`用于表示内容未知的位。字节的最高有效位(MSB)称为"第7位"，最低有效位(LSB)称为"第0位"。

标签是ID3v2主结构文档[ID3v2-strct]中描述的整个标签。帧是标签中的一个信息块。标签由标头、帧和可选填充组成。字段是一段信息；一个数值、一个字符串等。数字字符串是仅由字符"0123456789"组成的字符串。

本文档中的关键词"MUST"、"MUST NOT"、"REQUIRED"、"SHALL"、"SHALL NOT"、"SHOULD"、"SHOULD NOT"、"RECOMMENDED"、"MAY"和"OPTIONAL"应按照 RFC 2119[KEYWORDS]中的描述进行解释。

# 3.ID3v2概述

ID3v2是一种通用的音频标记格式，可将音频元数据存储在音频文件本身中。本文档中描述的ID3标签主要针对以MPEG-1/2第一层、MPEG-1/2第二层、MPEG-1/2第三层和MPEG-2.5编码的文件，但也可用于其他类型的编码音频或作为音频元数据的独立格式。

ID3v2设计得尽可能灵活和可扩展，以满足可能出现的新元信息需求。为了实现这一目标，ID3v2 被设计为若干信息块的容器，这些信息块被称为"帧"，遇到这些信息块的软件无需知道它们的格式。每个帧的开头都有一个预定义的唯一标识符、一个允许软件跳过未知帧的大小描述符和一个标志字段。标志字段描述了编码细节，以及如果文件被修改，该帧是否应保留在标签中或软件是否应知道。

ID3v2的位序是最重要位在前(MSB)。多字节数字的字节顺序是最有意义字节在前(例如，$12345678将被编码为 $12 34 56 78)，也称为大端和网络字节顺序。

整体标签结构：

|名称|大小|可选|
|-|-|-|
|标签头|10字节||
|扩展头|长度可变|是|
|帧|长度可变||
|填充|长度可变|是|
|标签尾|10字节|是|

一般来说，填充和标签尾是相互排斥的。详见第3.3、3.4和5节。

## 3.1.ID3v2标签头

ID3v2标签的第一部分是10个字节的标签头，布局如下：

|名称|内容|
|-|-|
|文件标识符|`"ID3"`|
|版本|`$04 00`|
|标志|`%abcd0000`|
|大小|4 * `%0xxxxxxx`|

标签的前三个字节总是"ID3"，表示这是一个ID3v2标签，后面是两个版本字节。ID3v2 版本的第一个字节是主要版本，第二个字节是修订版本。本例中为ID3v2.4.0。所有修订版本都向后兼容，而主要版本则不兼容。如果只支持ID3v2.4.0及以下版本的软件遇到版本 5 或更高的情况，应直接忽略整个标签。版本或修订版本永远不会是`$FF`。

版本之后是ID3v2标志字段，目前使用四个标志。

|代码|名称|含义|
|-|-|-|
|a|非同步|非同步是否应用于所有帧(详见第6.1节)。设置位表示使用。|
|b|扩展头|标签头后面是否有扩展头。扩展头在第3.2节中说明。设置位表示存在扩展头。|
|c|实验指示符|当标签处于试验阶段时，该标志应始终置位。|
|d|存在标签尾|标签末尾是否有有标签尾(第3.4节)。置位表示存在标签尾。**仅ID3v2.4**|

所有其他标记必须清零。如果设置了这些未定义标记中的一个，那么不知道标记功能的解析器可能无法读取该标记。

ID3v2标签大小存储为一个32位同步安全整数(第 6.2 节)，总共有28个有效位(最多代表256MB)。

ID3v2标签大小是扩展头、填充和非同步后帧的字节长度之和。如果有标签尾，则等于("总大小"-20)个字节，否则等于("总大小"-10)个字节。

ID3v2 标签可用以下通配符检测：

> `$49 44 33 yy yy xx zz zz zz zz`

其中`yy`小于`$FF`，`xx`为"标志"字节，`zz`小于`$80`。

## 3.2.ID3v2扩展头

扩展头包含的信息可以进一步深入了解标签的结构，但对正确解析标签信息并不重要；因此扩展头是可选的。

|名称|内容|
|-|-|
|扩展头大小|4 * `%0xxxxxxx`|
|标志数据长度|`$01`|
|扩展标志|`$xx`|

其中，"扩展头大小"是整个扩展头的大小，存储为32位同步安全整数。因此，一个扩展头的大小绝对不能少于6个字节。

扩展标志字段的大小由"标志字节数"描述，其定义如下：

> `%0bcd0000`

扩展头中设置的每个标志都附有数据，这些数据按标志出现的顺序排列(即标志`"b"`的数据在标志`"c"`的数据之前)。未设置的标志不能附加任何数据。修改标记时，必须取消所有未知标记的设置并删除相应数据。

每个已设置标记的数据都以长度字节开始，该字节包含一个介于`0`和`128`之间的值 (`$00-$7f`)，然后是具有长度字节所指示字段长度的数据。如果标记没有附加数据，则使用`$00`作为长度字节。

### b - 标记已更新

如果设置了该标记，则当前标记是当前文件或数据流中早期标记的更新。如果在当前标签中发现了被定义为唯一的帧，则这些帧将覆盖先前标签中的相应帧。该标记没有相应的数据。

标志数据长度 = `$00`。

### c - 存在CRC数据

如果设置了该标志，扩展头中将包含CRC-32[ISO-3309]数据。CRC 是对标签头和标签尾之间的所有数据计算的，如标签头的标记长度字段所示，减去扩展头。请注意，这包括填充(如果有的话)，但不包括标签尾。CRC-32以35位同步安全整数形式存储，上四位始终为零。

标志数据长度 = `$05`

CRC数据 5 * `%0xxxxxxx`

### d - 标记限制

在某些应用中，可能需要对标签进行比ID3v2规范更多的限制。请注意，这些限制的存在并不影响标签的解码方式，而只是影响编码前的限制方式。如果设置了该标记，则标记将受到如下限制：

标记数据长度 = `$01`

限制 `%ppqrrstt`

#### p - 标记大小限制

+ `%00` 标签总大小不超过128个帧或1MB。
+ `%01` 标签总大小不超过64个帧或128KB。
+ `%10` 标签总大小不超过32个帧或40KB。
+ `%11` 标签总大小不超过32个帧或4KB。

#### q - 文本编码限制

+ `%0` 无限制
+ `%1` 字符串只能使用ISO-8859-1[ISO-8859-1]或UTF-8[UTF-8]。

#### r - 文本字段大小限制

+ `%00` 无限制
+ `%01` 字符串长度不得超过1024个字符。
+ `%10` 字符串长度不得超过128个字符。
+ `%11` 字符串长度不得超过30个字符。

请注意，由于与编码有关，因此没有说明用多少字节来表示这些字符。如果文本帧由多个字符串组成，则字符串的总和会受到上述限制。

#### s - 图像编码限制

+ `%0` 无限制
+ `%1` 图像只能使用PNG[PNG]或JPEG[JFIF]编码。

#### t - 图像大小限制

+ `%00` 无限制
+ `%01` 所有图像均为256x256像素或更小。
+ `%10` 所有图像均为64x64像素或更小。
+ `%11` 除非另有要求，否则所有图像均为64x64像素。

> *本节内容仅适用于ID3v2.4*

## 3.3.填充

在最后一帧后(ID3标签的末尾)加入填充是可选项，可使所有帧的尺寸加在一起小于标签头中给出的尺寸。这种填充的一个可能目的是在标签中添加一些额外的帧或扩大现有的帧，而不必重写整个文件。填充字节的值必须是`$00`。标签的帧与帧之间或标签头与帧之间不得有任何填充。此外，当标签尾添加到标签中时，也不得有任何填充。

## 3.4.ID3v2标签尾

为了加快从文件末尾搜索 ID3v2 标签的速度，可以在标签中添加标签尾。必须在附加标签(即位于所有音频数据之后的标签)中添加标签尾。标签尾是标签头的副本，但有不同的标识符。

|名称|内容|
|-|-|
|标识符|`"3DI"`|
|版本|`$04 00`|
|标志|`%abcd0000`|
|大小|4 * `%0xxxxxxx`|

# 4.ID3v2帧概述

所有ID3v2帧都由一个帧头和一个或多个包含实际信息的字段组成。帧头总是10字节，布局如下：

|名称|内容|
|-|-|
|帧ID|`$xx xx xx xx`(四个字符)|
|大小|4 * `%0xxxxxxx`|
|标志|`$xx xx`|

帧ID由大写字母`A-Z`和`0-9`组成。以`"X"`、`"Y"`和`"Z"`开头的标识符用于实验帧，每个人都可以自由使用，无需在标签头设置实验位。请注意，其他人可能已经使用了与您相同的标识符。所有其他标识符要么已使用，要么保留供将来使用。

帧ID之后是一个大小描述符，包含加密、压缩和非同步后最终帧中数据的大小。该大小不包括帧标头("总帧大小"-10字节)，并以32位同步安全整数形式存储。

在帧头中，大小描述符后面有两个标志字节。这些标志将在第4.1节中说明。

虽然帧在标签中的出现没有固定的顺序，但我们希望帧的排列顺序与文件识别的重要性相一致。例如UFID、TIT2、MCDI、TRCK...

一个标签必须至少包含一个帧。一帧必须至少有一个字节大，不包括帧头。

如果没有其他说明，字符串，包括数字字符串和URL[URL]，都表示为范围为`$20-$FF`的ISO-8859-1[ISO-8859-1]字符。此类字符串在帧描述中表示为<文本字符串>，如果允许换行，则表示为<完整文本字符串>。如果没有其他说明，则禁止使用换行符。在ISO-8859-1中，如果允许换行，换行符只能用`0A`(即\n)表示。

---

允许使用不同类型文本编码的帧包含一个文本编码描述字节。可能的编码如下：

> **ID3v2.4**
>
> + `$00` ISO-8859-1[ISO-8859-1]。以`$00`结束。
> + `$01` UTF-16[UTF-16]编码Unicode[UNICODE]，含BOM。同一帧中的所有字符串应具有相同的字节序。以`$00 00`结束。
> + `$02` UTF-16BE[UTF-16]编码Unicode[UNICODE]，不含BOM。以`$00 00`结束。
> + `$03` UTF-8[UTF-8]编码的Unicode[UNICODE]。以`$00`结束。
>
> **ID3v2.3**
>
> + `$00` ISO-8859-1[ISO-8859-1]。以`$00`结束。
> + `$01` 16位Unicode[UNICODE]编码，含BOM(`$FF FE`或`$FE FF`)。以`$00 00`结束。

取决于编码方式的字符串在帧描述中表示为<指定编码的文本字符串>，如果允许换行，则表示为<指定编码的完整文本字符串>。任何以NULL结尾的`$01`类型的空字符串都可以在Unicode BOM后跟一个 Unicode NULL(`$FF FE 00 00`或`$FE FF 00 00`)。

> **译者注**
>
> ISO-8859-1即拉丁语-1(Windows代码页28591)，Windows-1252是ISO-8859-1的超集，即前者包含了后者所有的字符，并增加了一些字符(如撇号等)，因此ISO-8859-1可直接作为Windows-1252读取，但写入时可能造成错误。注意GB2312(及其向下兼容标准GB18030)兼容ASCII但不兼容ISO-8859-1。有些程序实际上写入Windows-1252甚至本地ANSI编码(Windows环境下)，实现时应视情况而定。

---

> **ID3v2.4**
>
> 时间戳字段基于ISO-8601的子集。在尽可能精确的情况下，时间字符串的格式为`yyyy-MM-ddTHH:mm:ss`(年、"-"、月、"-"、日、"T"、小时(24小时制)、":"、分、":"、秒)，但也可以通过删除任意数量的时间指示符来降低精确度。因此，有效的时间戳是 `yyyy`、`yyyy-MM`、`yyyy-MM-dd`、`yyyy-MM-ddTHH`、`yyyy-MM-ddTHH:mm`和`yyyy-MM-ddTHH:mm:ss`。所有时间戳均为UTC。对于持续时间，请使用ISO-8601中描述的斜线字符；对于多个非连续日期，如果帧定义允许，请使用多个字符串。

> **译者注**
>
> 斜线字符的用法为`起始时间/结束时间`。

---

> **ID3v2.4**
>
> 根据ISO-639-2[ISO-639-2]，有些帧中含三个字节的语言字段，用于描述帧内容的语言。语言应以小写字母表示。如果语言未知，则应使用字符串`"XXX"`。
>
> **ID3v2.3**
>
> 根据ISO-639-2[ISO-639-2]，帧内容的语言用三个字节的语言字段描述。

> **译者注**
>
> 下面列出部分常用语言的ISO-639-2代码。
>
> |名称|ISO-639-2代码|
> |-|-|
> |英语|`eng`|
> |汉语(中文)|`chi`、`zho`|
> |印地语|`hin`|
> |西班牙语|`spa`|
> |法语|`fra`、`fre`|
> |阿拉伯语|`ara`|
> |孟加拉语|`ben`|
> |俄语|`rus`|
> |葡萄牙语|`por`|
> |印尼语|`ind`|
> |乌尔都语|`urd`|
> |德语|`deu`|
> |日语|`jpn`|
> |朝鲜语(韩语)|`kor`|
> |越南语|`vie`|
> |意大利语|`ita`|
> |泰语|`tha`|
> |菲律宾语|`fil`|

---

所有URL[URL]都可以是相对的，例如`"picture.png"`、`"../doc.txt"`。

如果帧的长度超过了应有的长度，例如字段数量超过了本文档的规定，则表示ID3v2标准的后续版本对该帧进行了添加。标签头部的修订号就反映了这一点。

## 4.1.帧头标志

在帧标头中，大小描述符后有两个标志字节。所有未使用的标志必须清除。第一个字节用于"状态信息"，第二个字节用于格式描述。如果在第一个字节中设置了未知标志，则在未清除该位之前不得更改帧。如果在第二个字节中设置了未知标志，则帧可能无法读取。第二个字节中的某些标志表示在报头中添加了额外信息。这些额外信息字段按标志的顺序排列。标志字段定义如下(l和o因与1和0相似而省略)：

> `%0abc0000 %0h00kmnp`

某些帧格式标志表示帧中添加了附加信息字段。这些信息将按照标记的顺序添加到帧头之后、帧数据之前。例如，解压缩大小的四个字节将在加密方法字节之前。这些添加的信息会影响"帧大小"字段，但不受加密或压缩的影响。
  
除非另有说明，否则帧的默认状态标志设置为"标签被更改时保留"和"文件被更改时保留"，即`%0000000000`。

> **ID3v2.3**
>
> ID3v2.3的帧头标志定义如下
>
> `%abc00000 %ijk00000`
>
> 其与ID3v2.4帧头标志的对照关系为：
>
> |ID3v2.4标志代码|ID3v2.3标志代码|含义|
> |-|-|-|
> |a|a|标签更改保留|
> |b|b|文件更改保留|
> |c|c|只读|
> |h|k|分组标识|
> |k|i|压缩|
> |m|j|加密|
> |n|(无)|非同步|
> |p|(无)|数据长度指示符|
>
> 除此之外位的含义及帧中数据增加情况均相同。

### 4.1.1.帧状态标记

|代码|名称|含义|
|-|-|-|
|a|标签更改保留|该标记告诉标记解析器，如果该帧未知，且标记被以任何方式更改，应如何处理该帧。这适用于所有类型的更改，包括增加填充和重新排序帧。若设置该位则帧应丢弃。|
|b|文件更改保留|该标记告诉标记解析器，如果该帧未知，且文件(不包括标记)被更改，应如何处理该帧。这不适用于音频完全被其他音频数据取代的情况。若设置该位则帧应丢弃。|
|c|只读|如果设置了该标记，软件就会知道该帧的内容只能读取。更改内容可能会破坏某些东西，例如签名。如果在不知道该帧为何被标记为只读的情况下更改了内容，也没有采取适当的补偿措施(如重新计算签名)，则必须清除该位。|

### 4.1.2.帧格式标记

|代码|名称|含义|
|-|-|-|
|h|分组标识|该标志表示该帧是否与其他帧同属一组。如果设置，则在帧中添加一个组标识符字节。具有相同分组标识符的每个帧都属于同一个分组。若设置该位则帧包含分组信息。|
|k|压缩|该标志表示帧是否经过压缩。若设置该位则帧使用zlib[zlib] deflate方法压缩。如果设置，则需要同时设置"数据长度指示符"位。**(ID3v2.3中，数据长度不为同步安全整数)**|
|m|加密|该标志表示帧是否加密。如果设置则帧已加密，会在帧中添加一个字节说明加密的方法。有关加密方法注册的更多信息，请参阅ENCR帧的说明。加密应在压缩后进行。设置此标记是否需要"数据长度指示符"，取决于所使用的具体算法。|
|n|非同步|该标志表示是否对该帧应用了非同步。有关非同步的详细信息，请参阅第6节。如果设置了该标志，则从该报头末尾到该帧末尾的所有数据都已非同步化。尽管需要"数据长度指示符"，但非同步并不强制要求"数据长度指示符"的存在。|
|p|数据长度指示符|若设置该位表示帧中已添加数据长度指示符。数据长度指示符是在所有帧格式标志置零的情况下作为"帧长度"写入的值，用32位同步安全整数表示。|

# 5.标签位置

ID3v2标签的默认位置是在音频之前(预置)，以便播放器在流式传输数据时能从信息中获益。不过，也可以在尾部追加标签(追加)，或进行预置/追加组合。在决定未嵌入标签的位置时，应考虑以下优先顺序。
  
1. 预置标签。
2. 预置一个包含所有重要信息的标签，并在文件末尾、其他标记系统的标记之前添加第二个标记。第一个标签必须有SEEK帧。
3. 在文件末尾、其他标记系统的标记之前添加一个标记。

在第2和第3种情况下，如果没有其他已知标签，可以直接添加标签。建议使用以下方法查找ID3v2标记：
  
1. 使用第3.1节中的通配符查找预置标签。
2. 如果找到SEEK帧，则使用其值引导进一步搜索。
3. 从文件尾部扫描，查找标签尾。

每找到一个新标签，就应丢弃旧标签，除非在扩展头(第3.2节)中设置了更新标志。

# 6.非同步

非同步化的唯一目的是使ID3v2标签尽可能与现有软件和硬件兼容。如果只有ID3v2感知软件和硬件才能处理文件，那么"非同步化"标签就没有任何用处。非同步仅对MPEG 1/2 第一、第二和第三层、MPEG 2.5和AAC文件中的标签有用。

## 6.1.非同步方案

每当发现标签内有错误同步时，就会在第一个错误同步字节后插入一个归零字节。ID3 编码器应更改的同步格式如下：

> `%11111111 111xxxxx`

应替换为

> `%11111111 00000000 111xxxxx`

这样做的副作用是，必须更改所有`$FF 00`组合，使其不受解码过程的影响。因此，在非同步过程中，必须用`$FF 00 00`组合替换所有`$FF 00`组合。

为表示使用了非同步功能，应设置帧头中的非同步标志。如果帧被非同步化改变，则必须设置该位；如果未被改变，则不应设置该位。如果标记中的所有帧都是非同步的，则应设置标记头中的非同步标记。如果标签中有一帧未同步，则不得设置。

假设音频的第一个字节为`$FF`。当最后一帧的最后一个字节为`$FF`，且未使用填充或标签尾时，这种特殊情况将导致错误同步。要解决这个问题，可以添加标签尾、填充或取消同步帧，并在帧数据末尾添加`$00`，这样就会比正常的取消同步帧增加更多字节。虽然不是首选，但允许在所有以`$FF`结尾的帧上应用最后一种方法。

标签最好是完全非同步或完全不非同步。完全非同步的标记没有上述定义的错误同步，也不以`$FF`结尾。完全非同步标签不包含非同步帧，因此标头中的非同步标记会被清除。

请注意，如果使用了压缩或加密，则必须在之后应用非同步方案。解码非同步帧时，必须先反转非同步方案，然后再进行加密和解压缩。

## 6.2.同步安全整数

在标签的某些部分，使用非同步化方案很不方便，因为非同步数据的大小事先并不知晓，这在大小描述符中尤为突出。ID3v2的解决方案是使用同步安全整数，这样就不会出现任何错误的同步。同步安全整数是将最高位(第7位)置零的整数，这样8位中就有7位可用。因此，一个32位同步安全整数可以存储28位信息。例如：`255 (%11111111)` 编码为16位同步安全整数是`383 (%00000001 01111111)`。

# 7.版权

**Copyright (C) Martin Nilsson 2000. 保留所有权利。**

**本文件及其译文可复制并提供给他人，对本文件进行评论或解释或协助其实施的衍生作品可全部或部分编制、复制、出版和发行，不受任何形式的限制，前提是所有此类副本和衍生作品中必须提及本文件。但是，不得以任何方式修改本文件本身并将其作为原始文件重新发行。**

**上述授予的有限权限永久有效，不得撤销。**

**本文档及其中包含的信息均按"原样"提供，作者不作任何明示或暗示的保证，包括但不限于使用本文档中的信息不会侵犯任何权利的保证，或任何暗示的适销性或特定用途适用性的保证。**

# 8.参考文献

[ID3v2] Martin Nilsson, 'ID3v2 informal standard'.

<http://www.id3.org/id3v2.3.0.txt>

[ISO-639-2] ISO/FDIS 639-2.'Codes for the representation of names of languages, Part 2: Alpha-3 code.' Technical committee / subcommittee: TC 37 / SC 2

[ISO-3309] ISO 3309'Information Processing Systems--Data Communication High-Level Data Link Control Procedure--Frame Structure', IS 3309, October 1984, 3rd Edition.

[ISO-8859-1] ISO/IEC DIS 8859-1.'8-bit single-byte coded graphic character sets, Part 1: Latin alphabet No. 1.' Technical committee / subcommittee: JTC 1 / SC 2

[JFIF] 'JPEG File Interchange Format, version 1.02'

<http://www.w3.org/Graphics/JPEG/jfif.txt>

[KEYWORDS] S. Bradner, 'Key words for use in RFCs to Indicate Requirement Levels', RFC 2119, March 1997.

<ftp://ftp.isi.edu/in-notes/rfc2119.txt>

[MPEG] ISO/IEC 11172-3:1993.'Coding of moving pictures and associated audio for digital storage media at up to about 1,5 Mbit/s, Part 3: Audio.' Technical committee / subcommittee: JTC 1 / SC 29

and ISO/IEC 13818-3:1995 'Generic coding of moving pictures and associated audio information, Part 3: Audio.' Technical committee / subcommittee: JTC 1 / SC 29

and ISO/IEC DIS 13818-3 'Generic coding of moving pictures and associated audio information, Part 3: Audio (Revision of ISO/IEC 13818-3:1995)'

[PNG] 'Portable Network Graphics, version 1.0'

<http://www.w3.org/TR/REC-png-multi.html>

[UNICODE] The Unicode Consortium,'The Unicode Standard Version 3.0', ISBN 0-201-61633-5.

<http://www.unicode.org/unicode/standard/versions/Unicode3.0.htm>

[URL] T. Berners-Lee, L. Masinter & M. McCahill, 'Uniform Resource Locators (URL)', RFC 1738, December 1994.

<ftp://ftp.isi.edu/in-notes/rfc1738.txt>

[UTF-8] F. Yergeau, 'UTF-8, a transformation format of ISO 10646',RFC 2279, January 1998.
  
<ftp://ftp.isi.edu/in-notes/rfc2279.txt>

[UTF-16] F. Yergeau, 'UTF-16, an encoding of ISO 10646', RFC 2781, February 2000.
  
<ftp://ftp.isi.edu/in-notes/rfc2781.txt>
  
[ZLIB] P. Deutsch, Aladdin Enterprises & J-L. Gailly, 'ZLIB Compressed Data Format Specification version 3.3', RFC 1950, May 1996.

<ftp://ftp.isi.edu/in-notes/rfc1950.txt>

# 9.附录

**本节为译者添加。**

## A.附录A - 与ID3v2.3的不同

### A.1.ID3v2.4中的新增结构

+ [3.4.ID3v2标签尾](#34id3v2标签尾)

### A.2.ID3v2.3和ID3v2.4中都存在但不同的结构

#### A.2.1.ID3v2.3扩展头

扩展头包含的信息对正确解析标签信息并不重要，因此扩展头是可选的。

|名称|内容|
|-|-|
|扩展头大小|`$xx xx xx xx`|
|扩展标志|`$xx xx`|
|填充大小|`$xx xx xx xx`|

其中"扩展头大小"(目前为 6 或 10 字节)不包括自身。"填充大小"指的是不包括帧和标签头的总标签大小，即填充的0字节区域的大小。扩展头与标签头本身是分开的，因此会出现不同步的情况。

扩展标记是一个辅助标记集，用于描述标记的其他属性。这些属性目前定义如下

> `%x0000000 00000000`

x - 存在 CRC 数据

如果设置了该标志，扩展头将附加四个字节的CRC-32数据。CRC 应在扩展头和填充(即帧和仅帧)之间的数据非同步之前计算。

CRC数据 `$xx xx xx xx`

#### A.2.2.帧

主要改动为帧头标志，文本编码和时间戳等信息，参见下列小节：

+ [4.ID3v2帧概述](#4id3v2帧概述)
+ [4.1.帧头标志](#41帧头标志)

### A.3.ID3v2.4弃用的ID3v2.3中的结构

无。

## B.附录B - ID3v2.3与ID3v2.2的不同

### B.1.ID3v2.3中的新增结构

+ [ID3v2.3扩展头](#a21id3v23扩展头)

### B.2.ID3v2.2和ID3v2.3中都存在但不同的结构

#### B.2.1.ID3v2.2标签头

第7位与ID3v2.3相同，为不同步标志。

第6位表示是否使用压缩；设置位表示使用。由于尚未确定压缩方案，因此ID3解码器(目前)应该在压缩位被设置的情况下忽略整个标签。

其他所有位均保留。

#### B.2.2.ID3v2.2帧

帧头的结构相似，由一个3个字符的标识符(大写A-Z和0-9)和一个3个字节的大小字段组成，总共6个字节。帧头不包括在大小中。以`"X"`、`"Y"`和`"Z"`开头的标识符供试验使用，每个人都可以自由使用。请注意，其他人可能已经使用了与您相同的标识符。所有其他标识符要么已被使用，要么保留供将来使用。3个字符的帧标识符后面有一个3个字节的大小描述符，使得每个帧头大小为6个字节。大小的计算方法是：帧大小不包括帧标识符和大小描述符(帧大小-6)。

其他部分与ID3v2.3相同。

### B.3.ID3v2.3弃用的ID3v2.2中的结构

无。

# 10.作者地址

作者

马丁·尼尔森(Martin Nilsson)

瑞德斯维根(Rydsvägen) 246 C. 30 SE-584 34 林雪平(Linköping) 瑞典

电子邮件: <nilsson@id3.org>
